(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{299:function(t,e,i){"use strict";i.r(e);i.d(e,"default",function(){return s});function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(t,a.key,a)}}function n(t,e,i){if(e)a(t.prototype,e);if(i)a(t,i);return t}function h(t){var e=t.length/4;var i={lightness:0,r:0,g:0,b:0,a:0};for(var a=0;a<t.length;a+=4){i.lightness+=(t[a]+t[a+1]+t[a+2]+t[a+3])/4;i.r+=t[a];i.g+=t[a+1];i.b+=t[a+2];i.a+=t[a+3]}function n(t,e){return Math.round(Math.min(t,e))}i.lightness=n(i.lightness/e,255);i.r=n(i.r/e,255);i.g=n(i.g/e,255);i.b=n(i.b/e,255);i.a=n(i.a/e,255);return i}var s=function(){function s(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"monospace";var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:16;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var h=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"";r(this,s);this.canvas=t;this.context2D=this.canvas.getContext("2d");this.fontFamily=i;this.fontSize=a;this.scale=n;this.characterList=this.generateCharacters(h);this.image=new window.Image;this.image.src=e;this.image.addEventListener("load",this.convertImage.bind(this))}n(s,[{key:"convertImage",value:function t(){this.canvas.width=this.image.width*this.scale;this.canvas.height=this.image.height*this.scale;this.context2D.drawImage(this.image,0,0,this.canvas.width,this.canvas.height);this.context2D.font="".concat(this.fontSize,"px ").concat(this.fontFamily);this.context2D.textAlign="center";this.centerY=this.fontSize*.75;this.centerX=this.fontSize*.35;for(var e=0;e<this.canvas.height;e+=this.fontHeight){for(var i=0;i<this.canvas.width;i+=this.fontWidth){var a=this.context2D.getImageData(i,e,this.fontWidth,this.fontHeight).data;var n=this.getMatchingCharacter(a);if(n.average.lightness<75){n.average.a=(n.average.lightness+1)/255}this.context2D.clearRect(i,e,this.fontWidth,this.fontHeight);this.context2D.fillStyle="rgba(0,0,0,.25)";this.context2D.fillRect(i,e,this.fontWidth,this.fontHeight);this.context2D.fillStyle="rgba(".concat(n.average.r,", ").concat(n.average.g,", ").concat(n.average.b,", ").concat(n.average.a,")");this.context2D.fillText(n.character,i+this.centerX,e+this.centerY)}}this.image.removeEventListener("load",this.convertImage)}},{key:"generateCharacters",value:function t(e){var i=this;var a=[];if(!e||e===""){for(var n=32;n<127;n++){a.push(String.fromCharCode(n))}}else{a=e.split("")}this.fontHeight=this.fontSize;this.fontWidth=this.fontSize*.75;this.centerY=this.fontSize*.75;this.centerX=this.fontSize*.35;this.canvas.height=this.fontHeight;this.canvas.width=this.fontWidth;this.context2D.font="".concat(this.fontSize,"px ").concat(this.fontFamily);this.context2D.textAlign="center";a.forEach(function(t){var e=i.getCharacterAverage(t);if(e){a.push({character:t,average:e})}});return a}},{key:"getCharacterAverage",value:function t(e){this.context2D.clearRect(0,0,this.canvas.width,this.canvas.height);this.context2D.fillStyle="white";this.context2D.fillText(e,this.centerX,this.centerY);var i=this.context2D.getImageData(0,0,this.canvas.width,this.canvas.height).data;var a=h(i);a.lightness*=1.8;return a}},{key:"getMatchingCharacter",value:function t(e){var i=h(e);var a=Infinity;var n=null;this.characterList.forEach(function(t){if(t.average){var e=Math.abs(i.lightness-t.average.lightness);if(e<a){a=e;n=t}}});return{average:i,character:n.character}}}]);return s}()}}]);